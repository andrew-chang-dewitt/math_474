(function(u,n){typeof exports=="object"&&typeof module<"u"?module.exports=n(require("moo")):typeof define=="function"&&define.amd?define(["moo"],n):(u=typeof globalThis<"u"?globalThis:u||self,u.jsonLoose=n(u.moo))})(this,function(u){"use strict";const n=u.compile({WhiteSpace:{match:/[\t\v\f\ufeff\p{Zs}]+/u,lineBreaks:!0},Lines:{match:/\r?\n|[\r\u2028\u2029]/u,lineBreaks:!0},ObjectKey:/\[?(?:\x23)?(?=[$_\p{ID_Start}\\])(?:[$_\u200C\u200D\p{ID_Continue}]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+\]?(?=:)/u,Punctuator:/--|\+\+|=>|\.{3}|\??\.(?!\d)|(?:&&|\|\||\?\?|[+\-%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2}|\/(?![/*]))=?|[?~,:;[\](){}]/u,BooleanLiteral:/true|false/u,NumericLiteral:/(?:0[xX][\da-fA-F](?:_?[\da-fA-F])*|0[oO][0-7](?:_?[0-7])*|0[bB][01](?:_?[01])*)n?|0n|[1-9](?:_?\d)*n|(?:(?:0(?!\d)|0\d*[89]\d*|[1-9](?:_?\d)*)(?:\.(?:\d(?:_?\d)*)?)?|\.\d(?:_?\d)*)(?:[eE][+-]?\d(?:_?\d)*)?|0[0-7]+/u,StringLiteral:{match:/(?:'(?:(?!')[^\\\n\r]|\\(?:\r\n|[^]))*')|(?:"(?:(?!")[^\\\n\r]|\\(?:\r\n|[^]))*")/u,value:t=>`"${t.slice(1,-1)}"`},Identifier:/(?:\x23)?(?=[$_\p{ID_Start}\\])(?:[$_\u200C\u200D\p{ID_Continue}]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+/u});function o(t,r={}){const i=t.trim().replace(/[,]+$/,"");if(i==="")return"{}";if(!d(i))throw new TypeError("Unexpected input format");let a="";n.reset(i);for(const e of n)if(!(e.type==="WhiteSpace"||e.type==="Lines")){switch(e.type){case"Identifier":e.value=`"${r[e.value]||e.value}"`;break;case"ObjectKey":e.value.slice(0,1)==="["&&e.value.slice(-1)==="]"?e.value=`"${r[e.value.slice(1,-1)]||e.value.slice(1,-1)}"`:e.value=`"${e.value}"`;break}a+=e.value}return a.replace(/,([}\]])/g,"$1")}function d(t){return t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")}return o});
