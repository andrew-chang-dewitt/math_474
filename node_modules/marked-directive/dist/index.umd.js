(function(d,p){typeof exports=="object"&&typeof module<"u"?p(exports,require("moo")):typeof define=="function"&&define.amd?define(["exports","moo"],p):(d=typeof globalThis<"u"?globalThis:d||self,p(d.markedDirective={},d.moo))})(this,function(d,p){"use strict";var w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var x={exports:{}};x.exports,function(e){(function(t,i,s){function r(a){var n=this,o=m();n.next=function(){var f=2091639*n.s0+n.c*23283064365386963e-26;return n.s0=n.s1,n.s1=n.s2,n.s2=f-(n.c=f|0)},n.c=1,n.s0=o(" "),n.s1=o(" "),n.s2=o(" "),n.s0-=o(a),n.s0<0&&(n.s0+=1),n.s1-=o(a),n.s1<0&&(n.s1+=1),n.s2-=o(a),n.s2<0&&(n.s2+=1),o=null}function u(a,n){return n.c=a.c,n.s0=a.s0,n.s1=a.s1,n.s2=a.s2,n}function l(a,n){var o=new r(a),f=n&&n.state,c=o.next;return c.int32=function(){return o.next()*4294967296|0},c.double=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.quick=c,f&&(typeof f=="object"&&u(f,o),c.state=function(){return u(o,{})}),c}function m(){var a=4022871197,n=function(o){o=String(o);for(var f=0;f<o.length;f++){a+=o.charCodeAt(f);var c=.02519603282416938*a;a=c>>>0,c-=a,c*=a,a=c>>>0,c-=a,a+=c*4294967296}return(a>>>0)*23283064365386963e-26};return n}i&&i.exports?i.exports=l:this.alea=l})(w,e)}(x);var _=x.exports;const A=$(_),g=p.compile({WhiteSpace:{match:/[\t\v\f\ufeff\p{Zs}]+/u,lineBreaks:!0},Lines:{match:/\r?\n|[\r\u2028\u2029]/u,lineBreaks:!0},ObjectKey:/\[?(?:\x23)?(?=[$_\p{ID_Start}\\])(?:[$_\u200C\u200D\p{ID_Continue}]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+\]?(?=:)/u,Punctuator:/--|\+\+|=>|\.{3}|\??\.(?!\d)|(?:&&|\|\||\?\?|[+\-%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2}|\/(?![/*]))=?|[?~,:;[\](){}]/u,BooleanLiteral:/true|false/u,NumericLiteral:/(?:0[xX][\da-fA-F](?:_?[\da-fA-F])*|0[oO][0-7](?:_?[0-7])*|0[bB][01](?:_?[01])*)n?|0n|[1-9](?:_?\d)*n|(?:(?:0(?!\d)|0\d*[89]\d*|[1-9](?:_?\d)*)(?:\.(?:\d(?:_?\d)*)?)?|\.\d(?:_?\d)*)(?:[eE][+-]?\d(?:_?\d)*)?|0[0-7]+/u,StringLiteral:{match:/(?:'(?:(?!')[^\\\n\r]|\\(?:\r\n|[^]))*')|(?:"(?:(?!")[^\\\n\r]|\\(?:\r\n|[^]))*")/u,value:e=>`"${e.slice(1,-1)}"`},Identifier:/(?:\x23)?(?=[$_\p{ID_Start}\\])(?:[$_\u200C\u200D\p{ID_Continue}]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+/u});function S(e,t={}){const i=e.trim().replace(/[,]+$/,"");if(i==="")return"{}";if(!F(i))throw new TypeError("Unexpected input format");let s="";g.reset(i);for(const r of g)if(!(r.type==="WhiteSpace"||r.type==="Lines")){switch(r.type){case"Identifier":r.value=`"${t[r.value]||r.value}"`;break;case"ObjectKey":r.value.slice(0,1)==="["&&r.value.slice(-1)==="]"?r.value=`"${t[r.value.slice(1,-1)]||r.value.slice(1,-1)}"`:r.value=`"${r.value}"`;break}s+=r.value}return s.replace(/,([}\]])/g,"$1")}function F(e){return e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]")}const L=/[ \t\v\f\ufeff]+/,D=/(?:(?![\s\x00\x22\x27\x3E\x2F\x3D\x00-\x1F\x7F-\x9F])[^\s\x00-\x1F\x7F-\x9F\x22\x27\x3E\x2F\x3D])+/,E=/[.#](?:(?!-?\d)(?:[a-zA-Z0-9\xA0-\uFFFF_-])+)/,N=new RegExp("(?<==)(?:true|false)"),T=new RegExp("(?<==)-?(?:(?:0[xX][\\da-fA-F](?:_?[\\da-fA-F])*|0[oO][0-7](?:_?[0-7])*|0[bB][01](?:_?[01])*)n?|-?0n|-?[1-9](?:_?\\d)*n|(?:(?:0(?!\\d)|0\\d*[89]\\d*|[1-9](?:_?\\d)*)(?:\\.(?:\\d(?:_?\\d)*)?)?|\\.\\d(?:_?\\d)*)(?:[eE][+-]?\\d(?:_?\\d)*)?|-?0[0-7]+)"),j=new RegExp(`(?<==)'(?!.*&[0-9a-zA-Z]+;)[^'\\\\]*(?:\\\\.|\\\\n[^"\\\\]*|&[^0-9a-zA-Z;]*)*'`),W=new RegExp('(?<==)"(?!.*&[0-9a-zA-Z]+;)[^"\\\\]*(?:\\\\.|\\\\n[^"\\\\]*|&[^0-9a-zA-Z;]*)*"'),C=new RegExp("(?<==)[^\"\\s'`=<>\\x00]+");function h(e){const t=typeof e=="string"&&/^(['"]).*?\1$/.test(e)?e.slice(1,-1):e;return t.startsWith("[")&&t.endsWith("]")||t.startsWith("{")&&t.endsWith("}")?JSON.parse(S(t)):t}function O(e){let t="";for(const i in e){const s=e[i];switch(typeof s){case"object":t+=` ${i}='${JSON.stringify(s)}'`;break;case"string":t+=` ${i}="${s}"`;break;case"number":case"boolean":t+=` ${i}=${s}`;break}}return t.slice(1)}const y=p.states({main:{WhiteSpace:L,AttributeShorthand:E,BooleanLiteral:{match:N,value(e){return e==="true"}},NumericLiteral:{match:T,value(e){const t=Number(e);return Number.isNaN(t)?Number(e.replace(/_|n$/g,"")):Number(e)}},SingleQuotedValue:{match:j,value:h,type:()=>"StringLiteral"},DoubleQuotedLiteral:{match:W,value:h,type:()=>"StringLiteral"},UnquotedLiteral:{match:C,value:h,type:()=>"StringLiteral"},AttributeName:D,Separator:"="}});function z(e){let t=null;const i=y.reset(e),s={};Object.defineProperties(s,{toString:{writable:!1,enumerable:!1,configurable:!1,value:()=>O(s)},getTokens:{writable:!1,enumerable:!1,configurable:!1,value:()=>Array.from(y.reset(e))}});const r=[];for(const{type:u,value:l}of i)switch(u){case"AttributeName":t=l,s[t]=t;break;case"AttributeShorthand":l[0]==="."?r.push(l.slice(1)):l[0]==="#"&&(s.id=l.slice(1));break;case"BooleanLiteral":case"NumericLiteral":case"StringLiteral":t&&(t==="class"&&r.push(l),s[t]=l,t=null);break}return r.length&&(s.class=r.join(" ")),s}const Z=p.compile({spaces:/[\t\v\f\ufeff ]+/,name:/[a-zA-Z][\w-]*/,attrs:{match:/\{.*\}/,value:e=>z(e.slice(1,-1))},text:{match:/\[.*\]/,value:e=>e.slice(1,-1)},blockText:{match:/[\s\S]+/,lineBreaks:!0}});function B(e){const{type:t,level:i,raw:s,content:r,marker:u,tag:l}=e,m=Z.reset(r);let a,n,o="",f=[];for(const{type:c,value:b}of m)switch(c){case"name":a=b;break;case"attrs":n=b;break;case"text":case"blockText":o=b,f=i==="container"?this.lexer.blockTokens(b):this.lexer.inlineTokens(b);break}return{type:t,raw:s,meta:{level:i,marker:u,tag:l,name:a},attrs:n,text:o,tokens:f}}function R(e,t){switch(e){case"container":return`^${t}([\\s\\S]*?)\\n${t}`;case"block":return`^${t}((?:[a-zA-Z][\\w-]*|[\\{\\[].*?[\\}\\]])+)`;case"inline":return`^${t}((?:[a-zA-Z][\\w-]*|[\\{].*?[\\}]+|[\\[].*?[\\]])+)`}}function I(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}function v(e){return["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"].includes(e)}function P(e){const{meta:t,attrs:i,tokens:s=[]}=e,r=t.name||t.tag;let u=`<${r}`;return u+=i?" "+i.toString():"",u+=v(r)?" />":">",u+=t.level==="container"?`
`:"",v(r)||(u+=t.level==="container"?this.parser.parse(s):this.parser.parseInline(s),u+=`</${r}>`),u+=t.level==="inline"?"":`
`,u}const k=[{level:"container",marker:":::"},{level:"block",marker:"::"},{level:"inline",marker:":"}];function q(e=k){return{extensions:e.map(({level:t,marker:i,tag:s,renderer:r})=>{const u=A(i).int32(),l=`directive${I(t)}${u}`;return{name:l,level:t==="inline"?"inline":"block",start:m=>{var a;return(a=m.match(new RegExp(i)))==null?void 0:a.index},tokenizer(m){const a=R(t,i),n=m.match(new RegExp(a));if(n){const[o,f=""]=n;return B.call(this,{type:l,level:t,raw:o,content:f,marker:i,tag:s||(t==="inline"?"span":"div")})}},renderer:r||P}})}}d.createDirectives=q,d.isVoidElements=v,d.presetDirectiveConfigs=k,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
