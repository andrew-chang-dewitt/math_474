(function(a,i){typeof exports=="object"&&typeof module<"u"?module.exports=i(require("moo"),require("json-loose")):typeof define=="function"&&define.amd?define(["moo","json-loose"],i):(a=typeof globalThis<"u"?globalThis:a||self,a.parseAttrs=i(a.moo,a.jsonLoose))})(this,function(a,i){"use strict";const c=/[ \t\v\f\ufeff]+/,f=/(?:(?![\s\x00\x22\x27\x3E\x2F\x3D\x00-\x1F\x7F-\x9F])[^\s\x00-\x1F\x7F-\x9F\x22\x27\x3E\x2F\x3D])+/,d=/[.#](?:(?!-?\d)(?:[a-zA-Z0-9\xA0-\uFFFF_-])+)/,b=new RegExp("(?<==)(?:true|false)"),m=new RegExp("(?<==)-?(?:(?:0[xX][\\da-fA-F](?:_?[\\da-fA-F])*|0[oO][0-7](?:_?[0-7])*|0[bB][01](?:_?[01])*)n?|-?0n|-?[1-9](?:_?\\d)*n|(?:(?:0(?!\\d)|0\\d*[89]\\d*|[1-9](?:_?\\d)*)(?:\\.(?:\\d(?:_?\\d)*)?)?|\\.\\d(?:_?\\d)*)(?:[eE][+-]?\\d(?:_?\\d)*)?|-?0[0-7]+)"),h=new RegExp(`(?<==)'(?!.*&[0-9a-zA-Z]+;)[^'\\\\]*(?:\\\\.|\\\\n[^"\\\\]*|&[^0-9a-zA-Z;]*)*'`),p=new RegExp('(?<==)"(?!.*&[0-9a-zA-Z]+;)[^"\\\\]*(?:\\\\.|\\\\n[^"\\\\]*|&[^0-9a-zA-Z;]*)*"'),x=new RegExp("(?<==)[^\"\\s'`=<>\\x00]+");function l(t){const e=typeof t=="string"&&/^(['"]).*?\1$/.test(t)?t.slice(1,-1):t;return e.startsWith("[")&&e.endsWith("]")||e.startsWith("{")&&e.endsWith("}")?JSON.parse(i(e)):e}function L(t){let e="";for(const n in t){const r=t[n];switch(typeof r){case"object":e+=` ${n}='${JSON.stringify(r)}'`;break;case"string":e+=` ${n}="${r}"`;break;case"number":case"boolean":e+=` ${n}=${r}`;break}}return e.slice(1)}const u=a.states({main:{WhiteSpace:c,AttributeShorthand:d,BooleanLiteral:{match:b,value(t){return t==="true"}},NumericLiteral:{match:m,value(t){const e=Number(t);return Number.isNaN(e)?Number(t.replace(/_|n$/g,"")):Number(t)}},SingleQuotedValue:{match:h,value:l,type:()=>"StringLiteral"},DoubleQuotedLiteral:{match:p,value:l,type:()=>"StringLiteral"},UnquotedLiteral:{match:x,value:l,type:()=>"StringLiteral"},AttributeName:f,Separator:"="}});function A(t){let e=null;const n=u.reset(t),r={};Object.defineProperties(r,{toString:{writable:!1,enumerable:!1,configurable:!1,value:()=>L(r)},getTokens:{writable:!1,enumerable:!1,configurable:!1,value:()=>Array.from(u.reset(t))}});const o=[];for(const{type:g,value:s}of n)switch(g){case"AttributeName":e=s,r[e]=e;break;case"AttributeShorthand":s[0]==="."?o.push(s.slice(1)):s[0]==="#"&&(r.id=s.slice(1));break;case"BooleanLiteral":case"NumericLiteral":case"StringLiteral":e&&(e==="class"&&o.push(s),r[e]=s,e=null);break}return o.length&&(r.class=o.join(" ")),r}return A});
